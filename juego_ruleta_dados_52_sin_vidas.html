<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Ruleta y Dados ‚Äì 52 Preguntas (Modo Estudio, Sin Vidas)</title>

<style>
  body{
    font-family: Arial, sans-serif;
    background:#eef3ff;
    margin:0;
    padding:20px;
    display:flex;
    justify-content:center;
  }
  #app{
    max-width: 1100px;
    width:100%;
    background:white;
    border-radius:16px;
    padding:20px 24px 30px;
    box-shadow:0 4px 16px rgba(0,0,0,0.15);
  }
  h1{text-align:center;margin-top:0;}
  .top-bar{
    display:flex;
    justify-content:space-between;
    align-items:center;
    flex-wrap:wrap;
    gap:10px;
    margin-bottom:10px;
    font-size:14px;
  }
  .game-layout{
    display:grid;
    grid-template-columns: minmax(260px,320px) minmax(300px,1fr);
    gap:20px;
    margin-top:10px;
  }
  .panel{
    background:#f7f8ff;
    border-radius:14px;
    padding:15px;
  }
  .panel h2{margin-top:0;font-size:18px;}
  .ruleta-wrap{
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:10px;
  }
  .ruleta{
    width:200px;height:200px;border-radius:50%;border:8px solid #334;
    background: conic-gradient(#a6d8ff 0 120deg,#ffd27f 120deg 240deg,#ff9fbf 240deg 360deg);
    position:relative;transition: transform 1.2s ease-out;box-shadow:0 0 0 4px #fff;
  }
  .ruleta::before{
    content:'';position:absolute;inset:35px;border-radius:50%;background:#fdfdff;
  }
  .tag-ruleta{
    position:absolute;font-size:13px;font-weight:bold;
    text-shadow:0 1px 2px rgba(0,0,0,0.25);
  }
  .tag-basico{top:20px;left:50%;transform:translateX(-50%);color:#004b8d;}
  .tag-medio{top:50%;right:10px;transform:translateY(-50%) rotate(90deg);color:#8a5500;}
  .tag-avanzado{bottom:20px;left:50%;transform:translateX(-50%);color:#8b0036;}

  .flecha{
    width:0;height:0;border-left:16px solid transparent;border-right:16px solid transparent;
    border-bottom:26px solid #d33;margin-bottom:-4px;
  }

  .dice-row{
    display:flex;justify-content:center;gap:10px;margin-top:10px;
  }
  .dado{
    width:46px;height:46px;border-radius:10px;background:white;
    box-shadow:0 2px 4px rgba(0,0,0,0.2);
    display:flex;justify-content:center;align-items:center;font-size:20px;font-weight:bold;
  }

  button{
    padding:8px 14px;border-radius:999px;border:1px solid #345;background:#e1ebff;
    cursor:pointer;font-size:14px;
  }
  button:hover{background:#d1ddff;}
  button:disabled{opacity:0.6;cursor:not-allowed;}

  .opcion{margin:6px 0;padding:6px 8px;border-radius:8px;}
  .opcion input{margin-right:6px;}

  #resultado{font-weight:bold;margin-top:8px;}

  #explicacion{
    margin-top:8px;padding:10px;border-radius:10px;
    background:#eef;border-left:4px solid #44c;display:none;
  }

  .tag-dif{
    display:inline-block;padding:2px 8px;border-radius:999px;
    font-size:11px;margin-left:6px;
  }
  .dif-basico{background:#a6d8ff55;color:#004b8d;}
  .dif-medio{background:#ffd27f55;color:#8a5500;}
  .dif-avanzado{background:#ff9fbf55;color:#8b0036;}

  #final-msg{margin-top:10px;font-weight:bold;color:#8b0036;}
</style>
</head>

<body>
<div id="app">

  <h1>üé°üé≤ Ruleta y Dados ‚Äì 52 Preguntas (Modo Estudio, Sin Vidas)</h1>

  <div class="top-bar">
    <div>Preguntas respondidas: <span id="num-preg">0</span> / 52</div>
    <div>Aciertos: <span id="aciertos">0</span></div>
  </div>

  <div class="game-layout">
    <div class="panel">
      <h2>Ruleta de dificultad</h2>

      <div class="ruleta-wrap">
        <div class="flecha"></div>

        <div class="ruleta" id="ruleta">
          <div class="tag-ruleta tag-basico">B√ÅSICO</div>
          <div class="tag-ruleta tag-medio">MEDIO</div>
          <div class="tag-ruleta tag-avanzado">AVANZADO</div>
        </div>

        <button id="btn-girar">Girar ruleta</button>

        <div class="dice-row">
          <div class="dado" id="dado1">‚Äì</div>
          <div class="dado" id="dado2">‚Äì</div>
        </div>
      </div>
    </div>

    <div class="panel">
      <h2>Pregunta actual <span id="badge-dif" class="tag-dif" style="visibility:hidden;"></span></h2>

      <p id="texto-pregunta"><i>Gira la ruleta para obtener una pregunta.</i></p>

      <div id="opciones"></div>

      <button id="btn-verificar" disabled>Verificar respuesta</button>

      <p id="resultado"></p>
      <div id="explicacion"></div>
      <p id="final-msg"></p>
    </div>
  </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<script>
const sndAplausos = new Audio('aplausos.mp3');
const sndGato     = new Audio('gato.mp3');

const questions = [
  // B√ÅSICO
  {d:"basico",t:"Al lanzar un dado, ¬øcu√°ntos resultados posibles hay?",o:["6","5","4"],c:0,e:"Un dado tiene 6 caras del 1 al 6."},
  {d:"basico",t:"En una bolsa hay 2 bolas rojas y 3 azules. ¬øCu√°ntas hay en total?",o:["5","6","3"],c:0,e:"2 + 3 = 5."},
  {d:"basico",t:"Se lanza una moneda. ¬øQu√© resultados posibles hay?",o:["Cara o sello","1,2,3","Solo cara"],c:0,e:"Dos caras: cara y sello."},
  {d:"basico",t:"El eje horizontal de un gr√°fico de barras muestra:",o:["Categor√≠as","Cantidades","Probabilidades"],c:0,e:"El eje X suele mostrar categor√≠as."},
  {d:"basico",t:"El eje vertical en un gr√°fico de barras muestra:",o:["Frecuencia o cantidad","Nombres","Colores"],c:0,e:"El eje Y muestra cantidad o frecuencia."},
  {d:"basico",t:"8 prefieren f√∫tbol y 2 b√°squetbol. ¬øCu√°l es m√°s elegido?",o:["F√∫tbol","B√°squetbol","Igual"],c:0,e:"8 es mayor que 2."},
  {d:"basico",t:"Temperaturas: 10¬∞C,12¬∞C,14¬∞C,16¬∞C. ¬øMayor valor?",o:["16¬∞C","10¬∞C","12¬∞C"],c:0,e:"La m√°xima es 16¬∞C."},
  {d:"basico",t:"¬øCu√°ntos n√∫meros pares tiene un dado?",o:["3","2","4"],c:0,e:"2,4,6 ‚Üí 3 pares."},
  {d:"basico",t:"Si hay 4 caramelos y sacas 1, quedan:",o:["3","4","2"],c:0,e:"4-1=3."},
  {d:"basico",t:"Una barra m√°s alta significa:",o:["M√°s cantidad","Menos cantidad","No hay datos"],c:0,e:"Barra alta = mayor valor."},
  {d:"basico",t:"Una tirada de moneda es:",o:["Aleatoria","Segura","Fija"],c:0,e:"No podemos saber si saldr√° cara o sello."},
  {d:"basico",t:"Si dos barras tienen igual altura:",o:["Igual cantidad","Una mayor","Datos err√≥neos"],c:0,e:"Altura igual = cantidad igual."},
  {d:"basico",t:"En un gr√°fico de l√≠neas, los puntos se unen para mostrar:",o:["Evoluci√≥n","Dato fijo","Suma"],c:0,e:"Muestran cambio en el tiempo."},
  {d:"basico",t:"¬øEs seguro sacar n√∫mero par al lanzar un dado?",o:["No","S√≠","Nunca"],c:0,e:"Puede salir impar."},
  {d:"basico",t:"En tabla de frecuencia, 'frecuencia' es:",o:["Veces que se repite","Valor max.","Rango"],c:0,e:"Cu√°ntas veces aparece un dato."},
  {d:"basico",t:"Si m√≠nimo=3 y m√°ximo=9, rango:",o:["6","12","3"],c:0,e:"9-3=6."},
  {d:"basico",t:"Suceso imposible:",o:["Obtener 7 en un dado","Obtener 1","Cara/sello"],c:0,e:"Un dado solo tiene 1-6."},
  {d:"basico",t:"Suceso seguro:",o:["N√∫mero entre 1 y 6","N√∫mero 8","Solo pares"],c:0,e:"Siempre sale 1-6."},

  // MEDIO
  {d:"medio",t:"Bolsa:3 rojas,2 verdes,5 azules. Prob. roja:",o:["3/10","2/10","5/10"],c:0,e:"3 de 10."},
  {d:"medio",t:"Prob. de NO azul:",o:["5/10","3/10","7/10"],c:0,e:"No azul = 3+2=5."},
  {d:"medio",t:"Dado: prob ‚â•4:",o:["3/6","2/6","1/6"],c:0,e:"4,5,6 ‚Üí 3/6."},
  {d:"medio",t:"Prob. de NO impar:",o:["3/6","1/6","2/6"],c:0,e:"No impar=pares:2,4,6."},
  {d:"medio",t:"12 de 30 prefieren b√°squetbol. Prob:",o:["12/30","18/30","30/12"],c:0,e:"Favorables 12 de 30."},
  {d:"medio",t:"Tallo 5, hojas 2,7,9 representan:",o:["52,57,59","25,27,29","5,2,7,9"],c:0,e:"Tallo=decenas."},
  {d:"medio",t:"Datos 10,12,15,18,20. Mediana:",o:["15","18","12"],c:0,e:"Valor central (3¬∞)."},
  {d:"medio",t:"Datos 10,12,15,18,20. Rango:",o:["10","8","5"],c:0,e:"20-10=10."},
  {d:"medio",t:"Dos dados: espacio muestral:",o:["36","12","6"],c:0,e:"6√ó6=36."},
  {d:"medio",t:"Prob. suma=2:",o:["1/36","2/36","1/6"],c:0,e:"Solo (1,1)."},
  {d:"medio",t:"Prob. suma=7:",o:["6/36","3/36","1/36"],c:0,e:"6 casos ‚Üí 1/6."},
  {d:"medio",t:"Enero=10, Febrero=20. Variaci√≥n:",o:["+10","-10","+20"],c:0,e:"20-10=10."},
  {d:"medio",t:"Temp sube de 5¬∞C a 15¬∞C. Cambio:",o:["10¬∞C","5¬∞C","20¬∞C"],c:0,e:"15-5=10."},
  {d:"medio",t:"Mayor frecuencia en una tabla es:",o:["Moda","Mediana","Rango"],c:0,e:"La moda es lo m√°s repetido."},
  {d:"medio",t:"Ruleta prob ganar=1/5. No ganar:",o:["4/5","1/5","2/5"],c:0,e:"1-1/5=4/5."},
  {d:"medio",t:"Prob NO llover si P(lluvia)=0,3:",o:["0,7","0,3","0,5"],c:0,e:"1-0,3=0,7."},
  {d:"medio",t:"L√≠nea que baja bruscamente indica:",o:["Disminuci√≥n r√°pida","Aumento lento","Constante"],c:0,e:"Pendiente fuerte hacia abajo."},
  {d:"medio",t:"20 de 50 prefieren A. Prob:",o:["0,4","0,2","0,5"],c:0,e:"20/50=0,4."},

  // AVANZADO
  {d:"avanzado",t:"Caja:6 negras,4 blancas. Prob negra:",o:["6/10","4/10","1/2"],c:0,e:"6 de 10."},
  {d:"avanzado",t:"Prob NO blanca:",o:["6/10","4/10","10/6"],c:0,e:"No blanca=negra."},
  {d:"avanzado",t:"Cara y n√∫mero par:",o:["1/4","1/2","1/6"],c:0,e:"1/2 √ó 1/2 = 1/4."},
  {d:"avanzado",t:"Prob suma=9:",o:["4/36","3/36","6/36"],c:0,e:"(3,6),(4,5),(5,4),(6,3)."},
  {d:"avanzado",t:"Ambos impares:",o:["9/36","6/36","3/36"],c:0,e:"3√ó3=9."},
  {d:"avanzado",t:"Prob ‚â• un 6:",o:["11/36","25/36","1/6"],c:0,e:"1-(5/6)^2 = 11/36."},
  {d:"avanzado",t:"‚â•2 caras en 3 monedas:",o:["4/8","3/8","5/8"],c:0,e:"Casos: CCH, CHC, HCC, CCC."},
  {d:"avanzado",t:"Datos 52,54,57,60,63,65,68. Mediana:",o:["57","60","63"],c:1,e:"Valor central=60."},
  {d:"avanzado",t:"Datos 52,54,57,60,63,65,68. Rango:",o:["16","10","6"],c:0,e:"68-52=16."},
  {d:"avanzado",t:"6 y luego 1:",o:["1/36","1/12","1/6"],c:0,e:"1/6√ó1/6=1/36."},
  {d:"avanzado",t:"Tabla deportes. Prob f√∫tbol:",o:["12/30","8/30","5/30"],c:0,e:"12 de 30."},
  {d:"avanzado",t:"Tabla deportes. Frecuencia igual:",o:["Nataci√≥n y Tenis","F√∫tbol y B√°squetbol","Nataci√≥n y F√∫tbol"],c:0,e:"Ambos tienen 5."},
  {d:"avanzado",t:"Dado trucado P(6)=0,4. P(no 6):",o:["0,6","0,4","0,2"],c:0,e:"1-0,4=0,6."},
  {d:"avanzado",t:"Muestra 100 vs 20:",o:["M√°s representativa","Menos confiable","Sin variabilidad"],c:0,e:"M√°s tama√±o=+representatividad."},
  {d:"avanzado",t:"L√≠nea con subidas/bajadas bruscas:",o:["Cambios r√°pidos","Constante","Error seguro"],c:0,e:"Pendiente fuerte = variaci√≥n r√°pida."},
  {d:"avanzado",t:"P(gana)=0,25. P(pierde):",o:["0,75","0,5","0,25"],c:0,e:"1-0,25=0,75."}
];

let usadas = new Set();
let aciertos = 0;
let numRespondidas = 0;
let preguntaActual = null;

const ruleta      = document.getElementById("ruleta");
const btnGirar    = document.getElementById("btn-girar");
const dado1       = document.getElementById("dado1");
const dado2       = document.getElementById("dado2");
const txtPregunta = document.getElementById("texto-pregunta");
const opcionesDiv = document.getElementById("opciones");
const btnVerif    = document.getElementById("btn-verificar");
const resP        = document.getElementById("resultado");
const explDiv     = document.getElementById("explicacion");
const badgeDif    = document.getElementById("badge-dif");
const finalMsg    = document.getElementById("final-msg");
const nPregSpan   = document.getElementById("num-preg");
const aciertosSpan= document.getElementById("aciertos");

function lanzarDados(){
  dado1.textContent = 1 + Math.floor(Math.random()*6);
  dado2.textContent = 1 + Math.floor(Math.random()*6);
}

function confeti(){
  if(window.confetti){
    confetti({particleCount:120,spread:70,origin:{y:0.6}});
  }
}

function obtenerDificultad(angulo){
  const a = ((angulo % 360) + 360) % 360;
  if(a < 120) return "basico";
  if(a < 240) return "medio";
  return "avanzado";
}

function textoDif(d){
  if(d==="basico") return "B√ÅSICO";
  if(d==="medio") return "MEDIO";
  return "AVANZADO";
}

function claseDif(d){
  if(d==="basico") return "tag-dif dif-basico";
  if(d==="medio") return "tag-dif dif-medio";
  return "tag-dif dif-avanzado";
}

function escogerPregunta(dif){
  let lista = [];
  questions.forEach((q,i)=>{ if(q.d===dif && !usadas.has(i)) lista.push(i); });
  if(lista.length===0) questions.forEach((q,i)=>{ if(!usadas.has(i)) lista.push(i); });
  if(lista.length===0) return null;
  return lista[Math.floor(Math.random()*lista.length)];
}

function mostrarPregunta(i){
  preguntaActual = i;
  usadas.add(i);

  const q = questions[i];
  txtPregunta.textContent = q.t;
  opcionesDiv.innerHTML = "";
  resP.textContent = "";
  explDiv.style.display = "none";
  finalMsg.textContent = "";

  q.o.forEach((opc,idx)=>{
    const lbl = document.createElement("label");
    lbl.className = "opcion";
    lbl.innerHTML = `<input type="radio" name="opcion" value="${idx}"> ${opc}`;
    opcionesDiv.appendChild(lbl);
  });

  badgeDif.textContent = textoDif(q.d);
  badgeDif.className = claseDif(q.d);
  badgeDif.style.visibility = "visible";
  btnVerif.disabled = false;
}

btnGirar.onclick = () => {
  if(usadas.size >= questions.length){
    finalMsg.textContent = "üéâ Ya respondiste todas. Recarga para reiniciar.";
    return;
  }

  btnGirar.disabled = true;
  btnVerif.disabled = true;
  resP.textContent = "";
  explDiv.style.display = "none";
  finalMsg.textContent = "";

  const giro = 1080 + Math.floor(Math.random()*360);
  ruleta.style.transform = `rotate(${giro}deg)`;

  setTimeout(()=>{
    const dif = obtenerDificultad(giro);
    const idx = escogerPregunta(dif);
    if(idx==null){
      finalMsg.textContent="üéâ Juego terminado.";
      return;
    }
    mostrarPregunta(idx);
    btnGirar.disabled = false;
  },1200);
};

btnVerif.onclick = () => {
  if(preguntaActual===null) return;

  const q = questions[preguntaActual];
  const sel = document.querySelector("input[name='opcion']:checked");
  if(!sel){
    resP.textContent="Selecciona una respuesta.";
    return;
  }

  lanzarDados();
  numRespondidas++;
  nPregSpan.textContent = numRespondidas;

  const val = parseInt(sel.value);

  if(val === q.c){
    resP.textContent = "‚úî Correcto";
    aciertos++;
    aciertosSpan.textContent = aciertos;
    explDiv.style.display="block";
    explDiv.textContent = "Explicaci√≥n: " + q.e;
    try{ sndAplausos.currentTime = 0; sndAplausos.play(); }catch(e){}
    confeti();
  } else {
    resP.textContent = "‚úò Incorrecto";
    explDiv.style.display="block";
    explDiv.textContent = "Explicaci√≥n: " + q.e;
    try{ sndGato.currentTime = 0; sndGato.play(); }catch(e){}
  }

  btnVerif.disabled = true;

  if(usadas.size >= questions.length){
    finalMsg.textContent = "üéâ ¬°Has visto las 52 preguntas! Aciertos: " + aciertos;
    btnGirar.disabled = true;
  }
};
</script>

</body>
</html>
